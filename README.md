<h1 align="center">TelegramBotHotel - бот поиска отелей

[![Telegram URL](https://www.dampftbeidir.de/mediafiles/tpl/icon-telegram.png)](https://t.me/nolucker_python_bot)
</h1>

***

## Краткое описание

[Телеграмм бот](@nolucker_python_bot) позволяет найти выгодное предложение на
платформе [Hotels.com](https://hotels.com/).
<br> Пользователь с помощью специальных команд бота может выполнить следующие действия (получить следующую
информацию): <br/>

- Запустить бота (**команда /start**).
- Запросить помощь по командам функционалу бота (**команда /help**)

- Вывести дешёвые отели в указанном городе (**команда /lowprice**).
- Вывести дорогие отели в указанном городе (**команда /highprice**).
- Вывести отели, наиболее подходящих по цене и расположению от центра (самые дешёвые и находятся ближе всего к центру) (
  **команда /bestdeal**).

- Узнать историю поиска отелей (**команда /history**)

**Для разработки и функционирования проекта используется открытый API Hotels, который расположен на
сайте [rapidapi.com](https://rapidapi.com/apidojo/api/hotels4/).**

***

## Локальная установка

**Перед тем, как начать:**

- Если вы не пользуетесь `Python 3`, вам нужно установить инструмент `virtualenv` при помощи `pip install virtualenv`.
  Если вы используете `Python 3`, у вас уже установлен модуль [venv](https://docs.python.org/3/library/venv.html) в
  стандартной библиотеке.

Документация для настройки [виртуального окружения](https://docs.python.org/3/library/venv.html).

Краткая документация:

    - установить виртуальное окружение в терминале командой: <b>python -m venv venv</b><br>

### Инструкция по запуску проекта

1. Скопировать файлы проекта

```commandline
git clone https://gitlab.skillbox.ru/almir_zalitov/telegram_bot_for_search_hostels.git
```

2. Активировать виртуальное окружение командой: <b>source venv/bin/activate</b><br>


3. Установить зависимости:

```commandline
pip install -r requiments
```

4. Получить ключ для работы с API
    1. Зарегистрироваться на сайте [rapidapi.com](https://rapidapi.com)
    2. Оформить подписку на [API Hotels](https://rapidapi.com/apidojo/api/hotels4/)

5. Создать нового бота и получить токен для работы с ним.
    1. В приложении telegram нужен бот [BotFather](https://t.me/botfather) для получения токена.
    2. Создать нового бота командой `/newbot`
    3. Выполнить несколько простых шагов  
       [Руководство](https://core.telegram.org/bots#6-botfather)

6. В файле `.env` указать свой токен для бота и ключ от Rapid API  
   Пример файла `.env`:

```
BOT_TOKEN= "ваш бот токен"
RAPID_API_KEY='ваш ключ от Rapid API'
```

7. Запустить программу

```commandline
python main.py
```

Работа с телеграмм ботом
------------------------

### Начало работы

<b>№1</b>. Для начала работы отправьте боту команду `/start`

    После ввода команды: 

    - Выводится приветствие пользователю

![command_start.png](images%2Fcommand_images%2Fcommand_start.jpg)

<b>№2</b>. Для дальнейший навигаций, можете использовать команду `/help`

    После ввода команды: 

    - Информация о боте
    - Выводится список всех команд, кратким описанием что делает каждая команда

![command_help.png](images%2Fcommand_images%2Fcommand_help.png)

Так же для просмотра команд, можно воспользоваться кнопкой **меню** в левом нижнем углу

![menu.png](images%2Fcommand_images%2Fmenu_first_list.jpg)![menu.png](images%2Fcommand_images%2Fmenu_second_list.jpg)

### Поиск отелей на примере команды `/lowprice`

Выбрав данную команду, у нас запрашивает:

- **Город для поиска отелей**
- **Количество выдаваемых отелей**
- **Минимальная и максимальная стоимость отеля за ночь**
- **Нужно ли вывести фотографии:**
    - если **да** - то количество
    - если **нет** - пропуск шага

![Изображение экрана](/images/command_images/command_low_price.jpg)![Изображение экрана](/images/command_images/information.jpg)

### Пример вывода отелей телеграм бота.

    - Исходные данные
    - Информация по найденным отелям

![Изображение экрана](/images/command_images/first_hotel.jpg)
![Изображение экрана](/images/command_images/second_hotel.jpg)
![Изображение экрана](/images/command_images/third_hotel.jpg)

Описание работ команд бота
--------------------------

### Команды `/lowprice`, `/highprice`

После ввода команды у пользователя запрашивается:

1. Город, где будет проводиться поиск
2. Выдается список возможных вариантов городов в виде inline-клавиатуры, пользователь выбирает нужный
3. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума)
4. Запрашиваются минимальная и максимальная стоимость отеля в долларах США
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”). При положительном ответе пользователь также
   вводит количество необходимых фотографий (не больше заранее определённого максимума)
6. Выводится календарь с возможностью выбора даты заезда или выезда.

### Команда /bestdeal

После ввода команды у пользователя запрашивается:

1. Город, где будет проводиться поиск
2. Выдается список возможных вариантов городов в виде inline-клавиатуры, пользователь выбирает нужный
3. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума)
4. Запрашиваются минимальная и максимальная стоимость отеля в долларах США
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”). При положительном ответе пользователь также
   вводит количество необходимых фотографий (не больше заранее определённого максимума)
6. Выводится календарь с возможностью выбора даты заезда или выезда.
7. Диапазон расстояния, на котором находится отель от центра

### Команда /history

После ввода команды пользователю выводится история поиска отелей:

1. Выдает список выполненных пользователем запросом
2. Дату и время ввода команды
3. То слово (город), по которому пользователь искал отели
4. Если пользователю фотографии были не нужны, то они выведены не будут

## В разработке использованы

certifi==2024.2.2<br>
charset-normalizer==3.3.2<br>
idna==3.6<br>
loguru==0.7.2<br>
pyTelegramBotAPI==4.15.4<br>
python-dotenv==1.0.1<br>
requests==2.31.0<br>
urllib3==2.2.0<br>
